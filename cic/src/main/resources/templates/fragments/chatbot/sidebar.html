<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <!-- Chat Sidebar Component -->
    <div th:fragment="sidebar" class="sidebar">
        <!-- Sidebar Header with Theme Toggle -->
        <div class="sidebar-header">
            <div class="theme-toggle-wrapper">
                <div class="theme-toggle" id="themeToggle"></div>
                <img id="themeImage" th:src="@{/images/light.png}" alt="Light Mode">
            </div>
        </div>

        <!-- Search Container -->
        <div class="search-container">
            <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
            </svg>
            <input type="text" class="search-input" placeholder="Search">
        </div>

        <!-- Category Selector -->
        <div th:replace="~{fragments/chatbot/category-selector :: category-selector}"></div>

        <!-- Chat History Menu -->
        <div class="sidebar-menu">
            <div class="chat-history-header">
                <span class="menu-text">Chat History</span>
                <button class="new-chat-btn" id="newChatBtn" title="New Chat">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 11h3v-2h-3V8h-2v3H8v2h3v3h2v-3z" />
                    </svg>
                </button>
            </div>

            <div class="chat-history-list" id="chatHistoryList">
                <!-- Chat history items will be populated dynamically -->
                <div class="chat-history-item active">
                    <span class="chat-title">Welcome to CIC Chat</span>
                </div>
            </div>
        </div>

        <!-- Sidebar Footer with User Profile -->
        <div class="sidebar-footer">
            <div th:replace="~{fragments/chatbot/user-profile :: user-profile}"></div>
        </div>
    </div>
</body>
</html>